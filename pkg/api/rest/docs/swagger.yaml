basePath: /cicada
definitions:
  common.ErrorResponse:
    properties:
      error:
        type: string
    type: object
  domain.ParameterStructure:
    properties:
      properties:
        additionalProperties:
          $ref: '#/definitions/domain.PropertyDef'
        type: object
      required:
        items:
          type: string
        type: array
    type: object
  domain.PropertyDef:
    properties:
      default: {}
      description:
        type: string
      enum:
        items:
          type: string
        type: array
      example: {}
      items:
        $ref: '#/definitions/domain.PropertyDef'
      properties:
        additionalProperties:
          $ref: '#/definitions/domain.PropertyDef'
        type: object
      required:
        items:
          type: string
        type: array
      type:
        type: string
    type: object
  domain.TaskComponent:
    properties:
      created_at:
        type: string
      data:
        $ref: '#/definitions/domain.TaskComponentData'
      description:
        type: string
      id:
        type: string
      is_example:
        type: boolean
      name:
        type: string
      updated_at:
        type: string
    required:
    - data
    - id
    - name
    type: object
  domain.TaskComponentData:
    properties:
      body_params:
        $ref: '#/definitions/domain.ParameterStructure'
      options:
        $ref: '#/definitions/domain.TaskComponentOptions'
      path_params:
        $ref: '#/definitions/domain.ParameterStructure'
      query_params:
        $ref: '#/definitions/domain.ParameterStructure'
    type: object
  domain.TaskComponentOptions:
    properties:
      api_connection_id:
        type: string
      endpoint:
        type: string
      extra:
        additionalProperties: true
        type: object
      method:
        type: string
      request_body:
        type: string
    type: object
  model.CreateDataReq:
    properties:
      description:
        type: string
      task_groups:
        items:
          $ref: '#/definitions/model.CreateTaskGroupReq'
        type: array
    required:
    - task_groups
    type: object
  model.CreateTaskComponentReq:
    properties:
      data:
        $ref: '#/definitions/domain.TaskComponentData'
      name:
        type: string
    required:
    - data
    - name
    type: object
  model.CreateTaskGroupReq:
    properties:
      description:
        type: string
      name:
        type: string
      tasks:
        items:
          $ref: '#/definitions/model.CreateTaskReq'
        type: array
    required:
    - name
    - tasks
    type: object
  model.CreateTaskReq:
    properties:
      dependencies:
        items:
          type: string
        type: array
      extra:
        additionalProperties: true
        type: object
      name:
        type: string
      path_params:
        additionalProperties:
          type: string
        type: object
      query_params:
        additionalProperties:
          type: string
        type: object
      request_body:
        type: string
      task_component:
        type: string
    required:
    - name
    - request_body
    - task_component
    type: object
  model.CreateWorkflowReq:
    properties:
      data:
        $ref: '#/definitions/model.CreateDataReq'
      name:
        type: string
      spec_version:
        type: string
    required:
    - data
    - name
    type: object
  model.CreateWorkflowRunReq:
    properties:
      end_date:
        type: string
      execution_date:
        type: string
      run_type:
        type: string
      start_date:
        type: string
      state:
        type: string
      workflow_id:
        type: string
      workflow_run_id:
        type: string
    required:
    - workflow_id
    - workflow_run_id
    type: object
  model.Data:
    properties:
      description:
        type: string
      task_groups:
        items:
          $ref: '#/definitions/model.TaskGroup'
        type: array
    required:
    - task_groups
    type: object
  model.EventLog:
    properties:
      event:
        type: string
      extra:
        type: string
      run_id:
        type: string
      task_id:
        type: string
      task_name:
        type: string
      when:
        type: string
      workflow_id:
        type: string
      workflow_run_id:
        type: string
    type: object
  model.ImportError:
    properties:
      error:
        type: string
    type: object
  model.ImportErrorCollection:
    properties:
      import_errors:
        items:
          $ref: '#/definitions/model.ImportError'
        type: array
      total_entries:
        type: integer
    type: object
  model.RunScriptReq:
    properties:
      content:
        description: Base64 encoded script content.
        type: string
      mci_id:
        type: string
      ns_id:
        type: string
      vm_id:
        type: string
    type: object
  model.ScriptResult:
    properties:
      error:
        type: string
      is_success:
        type: boolean
      output:
        type: string
    type: object
  model.SimpleMsg:
    properties:
      message:
        type: string
    type: object
  model.SleepTimeReq:
    properties:
      time:
        description: 'Ex: 300 = 300sec, 1m 30s = 1min 30seconds, 1h 10m 15s = 1hour
          10minutes 15seconds, 1d 1s = 1day 1second, No Input Default: 10s'
        type: string
    type: object
  model.Task:
    properties:
      dependencies:
        items:
          type: string
        type: array
      extra:
        additionalProperties: true
        type: object
      id:
        type: string
      name:
        type: string
      path_params:
        additionalProperties:
          type: string
        type: object
      query_params:
        additionalProperties:
          type: string
        type: object
      request_body:
        type: string
      task_component:
        type: string
      task_group_id:
        type: string
      workflow_id:
        type: string
    required:
    - id
    - name
    - request_body
    - task_component
    - task_group_id
    - workflow_id
    type: object
  model.TaskClearOption:
    properties:
      dryRun:
        type: boolean
      includeDownstream:
        type: boolean
      includeUpstream:
        description: |-
          IncludeFuture     bool     `json:"includeFuture"`
          IncludeParentdag  bool     `json:"includeParentdag"`
          IncludePast       bool     `json:"includePast"`
          IncludeSubdags    bool     `json:"includeSubdags"`
        type: boolean
      onlyFailed:
        type: boolean
      onlyRunning:
        type: boolean
      resetDagRuns:
        type: boolean
      taskIds:
        items:
          type: string
        type: array
    type: object
  model.TaskGroup:
    properties:
      description:
        type: string
      id:
        type: string
      name:
        type: string
      tasks:
        items:
          $ref: '#/definitions/model.Task'
        type: array
      workflow_id:
        type: string
    required:
    - id
    - name
    - tasks
    - workflow_id
    type: object
  model.TaskInstance:
    properties:
      duration_date:
        type: number
      end_date:
        type: string
      execution_date:
        type: string
      is_software_migration_task:
        type: boolean
      software_migration_execution_id:
        type: string
      start_date:
        type: string
      state:
        type: string
      task_id:
        type: string
      task_name:
        type: string
      try_number:
        type: integer
      workflow_id:
        type: string
      workflow_run_id:
        type: string
    type: object
  model.TaskInstanceReference:
    properties:
      execution_date:
        type: string
      task_id:
        description: The task ID.
        type: string
      task_name:
        type: string
      workflow_id:
        description: The DAG ID.
        type: string
      workflow_run_id:
        description: The DAG run ID.
        type: string
    type: object
  model.TaskLog:
    properties:
      content:
        type: string
    type: object
  model.Workflow:
    properties:
      created_at:
        type: string
      data:
        $ref: '#/definitions/model.Data'
      id:
        type: string
      name:
        type: string
      spec_version:
        type: string
      updated_at:
        type: string
    required:
    - data
    - id
    - name
    - spec_version
    type: object
  model.WorkflowRun:
    properties:
      duration_date:
        type: number
      end_date:
        type: string
      execution_date:
        type: string
      id:
        type: string
      run_type:
        type: string
      start_date:
        type: string
      state:
        type: string
      workflow_id:
        type: string
    type: object
  model.WorkflowStatus:
    properties:
      count:
        type: integer
      state:
        type: string
    type: object
  model.WorkflowTemplate:
    properties:
      data:
        $ref: '#/definitions/model.Data'
      name:
        type: string
      spec_version:
        type: string
    required:
    - data
    - name
    - spec_version
    type: object
  model.WorkflowVersionSwg:
    properties:
      created_at:
        type: string
      definition_snapshot:
        additionalProperties: true
        type: object
      id:
        type: string
      spec_version:
        type: string
      version:
        type: integer
      workflow_id:
        type: string
    required:
    - id
    - spec_version
    - version
    - workflow_id
    type: object
info:
  contact: {}
  description: Workflow management module
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: CM-Cicada REST API
  version: latest
paths:
  /importErrors:
    get:
      consumes:
      - application/json
      description: Get the importErrors.
      operationId: get-import-errors
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the importErrors.
          schema:
            $ref: '#/definitions/model.ImportErrorCollection'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the importErrors.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get importErrors
      tags:
      - '[Workflow]'
  /readyz:
    get:
      consumes:
      - application/json
      description: Check Cicada is ready
      operationId: health-check-readyz
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get ready state.
          schema:
            $ref: '#/definitions/model.SimpleMsg'
        "500":
          description: Failed to check ready state.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Check Ready
      tags:
      - "[Admin]\tSystem management"
  /run_script:
    post:
      consumes:
      - application/json
      description: Run script on target with NS ID, MCI ID and VM ID.
      operationId: run-script
      parameters:
      - description: Workflow content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.RunScriptReq'
      produces:
      - application/json
      responses:
        "200":
          description: Result of the script running
          schema:
            $ref: '#/definitions/model.ScriptResult'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to run script
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Run script on target
      tags:
      - '[Cicada Task Component]'
  /sleep_time:
    post:
      consumes:
      - application/json
      description: Runs sleep command on cicada and waits for configured time. Wait
        for 10 seconds if time value is not provided.
      operationId: sleep-time
      parameters:
      - description: SleepTime request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.SleepTimeReq'
      produces:
      - application/json
      responses:
        "200":
          description: Result of sleep
          schema:
            $ref: '#/definitions/model.ScriptResult'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to run script
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Run sleep command on cicada
      tags:
      - '[Cicada Task Component]'
  /task/{taskId}:
    get:
      consumes:
      - application/json
      description: Get the task directly.
      operationId: get-task-directly
      parameters:
      - description: ID of the task.
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task.
          schema:
            $ref: '#/definitions/model.Task'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Task Directly
      tags:
      - '[Workflow]'
  /task_component:
    get:
      consumes:
      - application/json
      description: Get a list of task component.
      operationId: list-task-component
      parameters:
      - description: Page of the task component list.
        in: query
        name: page
        type: string
      - description: Row of the task component list.
        in: query
        name: row
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a list of task component.
          schema:
            items:
              $ref: '#/definitions/domain.TaskComponent'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a list of task component.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List TaskComponent
      tags:
      - '[Task Component]'
    post:
      consumes:
      - application/json
      description: Register the task component.
      operationId: create-task-component
      parameters:
      - description: task component to create.
        in: body
        name: TaskComponent
        required: true
        schema:
          $ref: '#/definitions/model.CreateTaskComponentReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully register the task component
          schema:
            $ref: '#/definitions/domain.TaskComponent'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to register the task component
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Create TaskComponent
      tags:
      - '[Task Component]'
  /task_component/{tcId}:
    delete:
      consumes:
      - application/json
      description: Delete the task component.
      operationId: delete-task-component
      parameters:
      - description: ID of the task component.
        in: path
        name: tcId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully delete the task component
          schema:
            $ref: '#/definitions/model.SimpleMsg'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to delete the task component
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Delete TaskComponent
      tags:
      - '[Task Component]'
    get:
      consumes:
      - application/json
      description: Get the task component.
      operationId: get-task-component
      parameters:
      - description: ID of the TaskComponent
        in: path
        name: tcId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task component
          schema:
            $ref: '#/definitions/domain.TaskComponent'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task component
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get TaskComponent
      tags:
      - '[Task Component]'
    put:
      consumes:
      - application/json
      description: Update the task component.
      operationId: update-task-component
      parameters:
      - description: ID of the TaskComponent
        in: path
        name: tcId
        required: true
        type: string
      - description: task component to modify.
        in: body
        name: TaskComponent
        required: true
        schema:
          $ref: '#/definitions/model.CreateTaskComponentReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully update the task component
          schema:
            $ref: '#/definitions/domain.TaskComponent'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to update the task component
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Update TaskComponent
      tags:
      - '[Task Component]'
  /task_component/name/{tcName}:
    get:
      consumes:
      - application/json
      description: Get the task component by name.
      operationId: get-task-component-by-name
      parameters:
      - description: Name of the TaskComponent
        in: path
        name: tcName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task component
          schema:
            $ref: '#/definitions/domain.TaskComponent'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task component
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get TaskComponent by Name
      tags:
      - '[Task Component]'
  /workflow:
    get:
      consumes:
      - application/json
      description: Get a workflow list.
      operationId: list-workflow
      parameters:
      - description: Name of the workflow
        in: query
        name: name
        type: string
      - description: Page of the workflow list.
        in: query
        name: page
        type: string
      - description: Row of the workflow list.
        in: query
        name: row
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a workflow list.
          schema:
            items:
              $ref: '#/definitions/model.Workflow'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a workflow list.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List Workflow
      tags:
      - '[Workflow]'
    post:
      consumes:
      - application/json
      description: Create a workflow.
      operationId: create-workflow
      parameters:
      - description: Workflow content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.CreateWorkflowReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully create the workflow.
          schema:
            $ref: '#/definitions/model.WorkflowTemplate'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to create workflow.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Create Workflow
      tags:
      - '[Workflow]'
  /workflow/{wfId}:
    delete:
      consumes:
      - application/json
      description: Delete the workflow.
      operationId: delete-workflow
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully delete the workflow
          schema:
            $ref: '#/definitions/model.SimpleMsg'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to delete the workflow
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Delete Workflow
      tags:
      - '[Workflow]'
    get:
      consumes:
      - application/json
      description: Get the workflow.
      operationId: get-workflow
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the workflow.
          schema:
            $ref: '#/definitions/model.Workflow'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the workflow.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Workflow
      tags:
      - '[Workflow]'
    put:
      consumes:
      - application/json
      description: Update the workflow content.
      operationId: update-workflow
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: Workflow to modify.
        in: body
        name: Workflow
        required: true
        schema:
          $ref: '#/definitions/model.CreateWorkflowReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully update the workflow
          schema:
            $ref: '#/definitions/model.Workflow'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to update the workflow
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Update Workflow
      tags:
      - '[Workflow]'
  /workflow/{wfId}/eventlogs:
    get:
      consumes:
      - application/json
      description: Get Eventlog.
      operationId: get-event-logs
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the workflow run.
        in: query
        name: wfRunId
        type: string
      - description: ID of the task.
        in: query
        name: taskId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the workflow.
          schema:
            items:
              $ref: '#/definitions/model.EventLog'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the workflow.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Eventlog
      tags:
      - '[Workflow]'
  /workflow/{wfId}/run:
    post:
      consumes:
      - application/json
      description: Run the workflow.
      operationId: run-workflow
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully run the workflow.
          schema:
            $ref: '#/definitions/model.SimpleMsg'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to run the Workflow
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Run Workflow
      tags:
      - '[Workflow]'
  /workflow/{wfId}/runs:
    get:
      consumes:
      - application/json
      description: Get DAG runs from Airflow API.
      operationId: get-workflow-runs
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the workflowRuns.
          schema:
            $ref: '#/definitions/model.WorkflowRun'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the workflowRuns.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get workflowRuns
      tags:
      - '[Workflow]'
    post:
      consumes:
      - application/json
      description: Airflow에서 DAG 종료 시 POST로 보낸 workflow run 데이터를 DB에 저장. 실행내역 전부 INSERT.
      operationId: create-workflow-run
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: Workflow run data (Airflow callback payload)
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.CreateWorkflowRunReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully saved workflow run
          schema:
            $ref: '#/definitions/model.WorkflowRun'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to save workflow run
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Create WorkflowRun (DB 저장)
      tags:
      - '[Workflow]'
  /workflow/{wfId}/status:
    get:
      consumes:
      - application/json
      description: Get the WorkflowStatus.
      operationId: get-WorkflowStatus
      parameters:
      - description: wfId of the workflow
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the WorkflowVersion.
          schema:
            items:
              $ref: '#/definitions/model.WorkflowStatus'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the WorkflowVersion.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get WorkflowStatus
      tags:
      - '[Workflow]'
  /workflow/{wfId}/task:
    get:
      consumes:
      - application/json
      description: Get a task list of the workflow.
      operationId: list-task
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a task list.
          schema:
            items:
              $ref: '#/definitions/model.Task'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a task list.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List Task
      tags:
      - '[Workflow]'
  /workflow/{wfId}/task/{taskId}:
    get:
      consumes:
      - application/json
      description: Get the task.
      operationId: get-task
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the task.
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task.
          schema:
            $ref: '#/definitions/model.Task'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Task
      tags:
      - '[Workflow]'
  /workflow/{wfId}/task_group:
    get:
      consumes:
      - application/json
      description: Get a task group list of the workflow.
      operationId: list-task-group
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a task group list.
          schema:
            items:
              $ref: '#/definitions/model.TaskGroup'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a task group list.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List TaskGroup
      tags:
      - '[Workflow]'
  /workflow/{wfId}/task_group/{tgId}:
    get:
      consumes:
      - application/json
      description: Get the task group.
      operationId: get-task-group
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the task group.
        in: path
        name: tgId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task group.
          schema:
            $ref: '#/definitions/model.Task'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task group.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get TaskGroup
      tags:
      - '[Workflow]'
  /workflow/{wfId}/task_group/{tgId}/task:
    get:
      consumes:
      - application/json
      description: Get a task list from the task group.
      operationId: list-task-from-task-group
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the task group.
        in: path
        name: tgId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a task list from the task group.
          schema:
            items:
              $ref: '#/definitions/model.Task'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a task list from the task group.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List Task from Task Group
      tags:
      - '[Workflow]'
  /workflow/{wfId}/task_group/{tgId}/task/{taskId}:
    get:
      consumes:
      - application/json
      description: Get the task from the task group.
      operationId: get-task-from-task-group
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the task group.
        in: path
        name: tgId
        required: true
        type: string
      - description: ID of the task.
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task from the task group.
          schema:
            $ref: '#/definitions/model.Task'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task from the task group.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Task from Task Group
      tags:
      - '[Workflow]'
  /workflow/{wfId}/version:
    get:
      consumes:
      - application/json
      description: Get a workflowVersion list.
      operationId: list-workflowVersion
      parameters:
      - description: wfId of the workflow
        in: path
        name: wfId
        required: true
        type: string
      - description: Page of the workflowVersion list.
        in: query
        name: page
        type: string
      - description: Row of the workflowVersion list.
        in: query
        name: row
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a workflowVersion list.
          schema:
            items:
              $ref: '#/definitions/model.WorkflowVersionSwg'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a workflowVersion list.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List workflowVersion
      tags:
      - '[Workflow]'
  /workflow/{wfId}/versioned:
    put:
      consumes:
      - application/json
      description: Workflow를 덮어쓰지 않고 새 WorkflowVersion을 생성한 뒤, 삭제분은 soft delete, 나머지는
        upsert. Workflow = 현재 최신 정의 포인터, WorkflowVersion = 불변 스냅샷(append-only).
      operationId: update-workflow-versioned
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: Workflow to modify.
        in: body
        name: Workflow
        required: true
        schema:
          $ref: '#/definitions/model.CreateWorkflowReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully update the workflow
          schema:
            $ref: '#/definitions/model.Workflow'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to update the workflow
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Update Workflow (버전 생성)
      tags:
      - '[Workflow]'
  /workflow/{wfId}/workflowRun/{wfRunId}/range:
    post:
      consumes:
      - application/json
      description: Clear the task Instance.
      operationId: clear-task-instances
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the wfRunId.
        in: path
        name: wfRunId
        required: true
        type: string
      - description: Workflow content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.TaskClearOption'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully clear the taskInstances.
          schema:
            $ref: '#/definitions/model.TaskInstanceReference'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to clear the taskInstances.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Clear taskInstances
      tags:
      - '[Workflow]'
  /workflow/{wfId}/workflowRun/{wfRunId}/task/{taskId}/taskTryNum/{taskTryNum}/logs:
    get:
      consumes:
      - application/json
      description: Get the task Logs.
      operationId: get-task-logs
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the workflowRunId.
        in: path
        name: wfRunId
        required: true
        type: string
      - description: ID of the task.
        in: path
        name: taskId
        required: true
        type: string
      - description: ID of the taskTryNum.
        in: path
        name: taskTryNum
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the task Logs.
          schema:
            $ref: '#/definitions/model.TaskLog'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task Logs.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Task Logs
      tags:
      - '[Workflow]'
  /workflow/{wfId}/workflowRun/{wfRunId}/task/{taskId}/taskTryNum/{taskTryNum}/logs/download:
    get:
      consumes:
      - application/json
      description: Download the task logs as a file.
      operationId: get-task-logs-download
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the workflowRunId.
        in: path
        name: wfRunId
        required: true
        type: string
      - description: ID of the task.
        in: path
        name: taskId
        required: true
        type: string
      - description: ID of the taskTryNum.
        in: path
        name: taskTryNum
        required: true
        type: string
      produces:
      - text/plain
      responses:
        "200":
          description: Log file downloaded successfully.
          schema:
            type: file
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the task Logs.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Download Task Logs
      tags:
      - '[Workflow]'
  /workflow/{wfId}/workflowRun/{wfRunId}/taskInstances:
    get:
      consumes:
      - application/json
      description: Get the task Logs.
      operationId: get-task-instances
      parameters:
      - description: ID of the workflow.
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the workflow.
        in: path
        name: wfRunId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the taskInstances.
          schema:
            $ref: '#/definitions/model.TaskInstance'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the taskInstances.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get taskInstances
      tags:
      - '[Workflow]'
  /workflow/name/{wfName}:
    get:
      consumes:
      - application/json
      description: Get the workflow by name.
      operationId: get-workflow-by-name
      parameters:
      - description: Name of the workflow.
        in: path
        name: wfName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the workflow.
          schema:
            $ref: '#/definitions/model.Workflow'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the workflow.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get Workflow by Name
      tags:
      - '[Workflow]'
  /workflow/tx:
    post:
      consumes:
      - application/json
      description: Create a workflow with TaskGroups/Tasks in a single DB transaction.
      operationId: create-workflow-tx
      parameters:
      - description: Workflow content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.CreateWorkflowReq'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully create the workflow.
          schema:
            $ref: '#/definitions/model.Workflow'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to create workflow.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Create Workflow (DB Tx)
      tags:
      - '[Workflow]'
  /workflow/version/{verId}:
    get:
      consumes:
      - application/json
      description: Get the WorkflowVersion.
      operationId: get-WorkflowVersion
      parameters:
      - description: wfId of the workflow
        in: path
        name: wfId
        required: true
        type: string
      - description: ID of the WorkflowVersion.
        in: path
        name: verId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the WorkflowVersion.
          schema:
            $ref: '#/definitions/model.WorkflowVersionSwg'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the WorkflowVersion.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get WorkflowVersion
      tags:
      - '[Workflow]'
  /workflow_template:
    get:
      consumes:
      - application/json
      description: Get a list of workflow template.
      operationId: list-workflow-template
      parameters:
      - description: Name of the workflow template
        in: query
        name: name
        type: string
      - description: Page of the workflow template list.
        in: query
        name: page
        type: string
      - description: Row of the workflow template list.
        in: query
        name: row
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get a list of workflow template.
          schema:
            items:
              $ref: '#/definitions/model.WorkflowTemplate'
            type: array
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get a list of workflow template.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: List WorkflowTemplate
      tags:
      - '[Workflow Template]'
  /workflow_template/{wftId}:
    get:
      consumes:
      - application/json
      description: Get the workflow template.
      operationId: get-workflow-template
      parameters:
      - description: ID of the WorkflowTemplate
        in: path
        name: wftId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the workflow template
          schema:
            $ref: '#/definitions/model.WorkflowTemplate'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the workflow template
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get WorkflowTemplate
      tags:
      - '[Workflow Template]'
  /workflow_template/name/{wfName}:
    get:
      consumes:
      - application/json
      description: Get the workflow template by name.
      operationId: get-workflow-template-by-name
      parameters:
      - description: Name of the WorkflowTemplate
        in: path
        name: wfName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully get the workflow template
          schema:
            $ref: '#/definitions/model.WorkflowTemplate'
        "400":
          description: Sent bad request.
          schema:
            $ref: '#/definitions/common.ErrorResponse'
        "500":
          description: Failed to get the workflow template
          schema:
            $ref: '#/definitions/common.ErrorResponse'
      summary: Get WorkflowTemplate by Name
      tags:
      - '[Workflow Template]'
swagger: "2.0"
